{"./":{"url":"./","title":"前言","keywords":"","body":"iOS逆向开发：动态调试 最新版本：v0.5 更新时间：20221023 简介 介绍iOS逆向中的动态调试，包括动态调试的概览；以及调试代码逻辑方面，包括调试工具的MonkeyDev、lldb+debugserver、Frida等；以及相关子领域，比如反调试和反反调试等；以及查看界面元素的工具，比如Reveal、Cycript、LLDBTools、chisel、FLEX等；最后给出一些经验心得。 源码+浏览+下载 本书的各种源码、在线浏览地址、多种格式文件下载如下： HonKit源码 crifan/ios_re_dynamic_debug: iOS逆向开发：动态调试 如何使用此HonKit源码去生成发布为电子书 详见：crifan/honkit_template: demo how to use crifan honkit template and demo 在线浏览 iOS逆向开发：动态调试 book.crifan.org iOS逆向开发：动态调试 crifan.github.io 离线下载阅读 iOS逆向开发：动态调试 PDF iOS逆向开发：动态调试 ePub iOS逆向开发：动态调试 Mobi 版权和用途说明 此电子书教程的全部内容，如无特别说明，均为本人原创。其中部分内容参考自网络，均已备注了出处。如有版权，请通过邮箱联系我 admin 艾特 crifan.com，我会尽快删除。谢谢合作。 各种技术类教程，仅作为学习和研究使用。请勿用于任何非法用途。如有非法用途，均与本人无关。 鸣谢 感谢我的老婆陈雪的包容理解和悉心照料，才使得我crifan有更多精力去专注技术专研和整理归纳出这些电子书和技术教程，特此鸣谢。 更多其他电子书 本人crifan还写了其他100+本电子书教程，感兴趣可移步至： crifan/crifan_ebook_readme: Crifan的电子书的使用说明 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:45:04 "},"dynamic_dbg_overview/":{"url":"dynamic_dbg_overview/","title":"iOS逆向动态调试概览","keywords":"","body":"iOS逆向动态调试概览 iOS逆向，从是否要运行代码的角度来说，分： 不要运行代码的：静态分析 要运行代码的：动态调试 此文主要介绍动态调试的相关内容： 输入=前提：砸壳出的ipa文件（或已把ipa安装到iOS设备中） 主要涉及的内容=领域 调试代码逻辑 常见调试工具 图形界面：Xcode + MonkeyDev 命令行：debugserver + lldb Frida IDA 【整理Book】逆向利器：IDA 涉及到的相关子领域 反调试和反反调试 Xcode调试心得 【整理Book】Xcode开发：调试心得 LLDB调试心得 【整理Book】Xcode内置调试器：LLDB 调试界面元素 Reveal Cycript （MonkeyDev的）LLDBTools chisel FLEX crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 14:22:00 "},"anti_debug_related.html":{"url":"anti_debug_related.html","title":"反调试和反反调试","keywords":"","body":"反调试和反反调试 TODO： 【整理】iOS反越狱相关：反调试 反反调试 【已解决】iOS反调试和反反调试：syscall的ptrace 【未解决】iOS反调试和反反调试：svc 0x80的syscall的ptrace 【已解决】Mac中lldb调试iOS的app抖音报错：Process exited with status 45 由于现在多数iOS的app，都做了反调试的防护，导致想要能顺利调试iOS的app之前，都要去解决：反反调试。 所以此处就分别涉及到： 正向的：反调试 逆向的：反反调试 反调试 反反调试 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 15:35:13 "},"debug_code/":{"url":"debug_code/","title":"调试代码逻辑","keywords":"","body":"调试代码逻辑 TODO： 【未解决】如何调试iPhone中iOS的app iOS逆向中的动态调试，其中主要是关于，用各种调试工具去调试代码逻辑。 常用调试工具有： MonkeyDev lldb+debugserver Frida IDA 【整理Book】逆向利器：IDA 概述：其实IDA更多的是用来静态分析代码逻辑，偶尔用来动态调试 以及相关心得：独立子教程 Xcode调试心得 【整理Book】Xcode开发：调试心得 LLDB调试心得 【整理Book】Xcode内置调试器：LLDB crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 15:43:52 "},"debug_code/monkeydev.html":{"url":"debug_code/monkeydev.html","title":"MonkeyDev","keywords":"","body":"MonkeyDev TODO： 【已解决】MonkeyDev的XCode项目编译报错：Unable to install This application’s application-identifier entitlement does not match that of the installed application 【记录】用XCode和MonkeyDev调试Logos越狱插件代码的效果 【已解决】用XCode和MonkeyDev去调试iOS抖音app 【未解决】给MonkeyDev的pack.sh加上echo的log日志调试分析运行逻辑 【记录】分析XCode+MonkeyDev编译抖音ipa详细过程的log 【未解决】XCode+MonkeyDev调试iOS的ipa除了首次外后续调试均会异常 【基本解决】Mac中用MonkeyDev+XCode去调试抖音脱壳ipa crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 15:43:26 "},"debug_code/lldb_debugserver.html":{"url":"debug_code/lldb_debugserver.html","title":"lldb+debugserver","keywords":"","body":"lldb+debugserver TODO： 【已解决】把增加了权限的debugserver拷贝到越狱iPhone中 【已解决】debugserver带日志运行报错：Failed to open log file for writing errno 1 Operation not permitted 【已解决】debugserver启动iOS的app抖音报错：Segmentation fault 11 【已解决】用debugserver和lldb去调试iOS的app iOS逆向调试代码逻辑的调试工具之一是：命令行的lldb + debugserver debugserver 是什么：一个终端的应用 也是：XCode去调试iOS设备中程序时候的进程名 在哪里：iOS设备中 位置：/Developer/usr/bin/debugserver 注：iOS中默认没安装 iOS中安装debugserver 在设备连接过一次Xcode，并在Window->Devices中添加此设备后 debugserver才会被Xcode安装到iOS的/Developer/usr/bin/下 作用：作为服务端，接受来自远端的gdb或lldb的调试 可以理解为：lldb的server 为何需要 iOS中，由于App运行检测到越狱后会直接退出，所以需要通过debugserver来启动程序 通过debugserver来启动程序 举例 debugserver -x backboard 0.0.0.0:1234 ./* debugserver *:1234 -a \"MoneyPlatListedVersion\" 从技术上，应属于：LLDB的远程调试，需要用到：lldb-server lldb-server 远程调试 分2个端 lldb client 运行在 local system 比如Linux、Mac lldb server 不同平台 Linux和Android：lldb-server 不依赖于lldb 因为：已静态链接包含了LLDB的核心功能 对比：lldb是默认是动态链接liblldb.so Mac和iOS：debugserver 运行在 remote system 实现了remote-gdb的功能 两者通讯 用的是：gdb-remote协议 一般是在TCP/IP之上运行 细节详见： docs/lldb-gdb-remote.txt 资料 主页 Remote Debugging — The LLDB Debugger http://lldb.llvm.org/use/remote.html crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:16:55 "},"debug_code/frida.html":{"url":"debug_code/frida.html","title":"Frida","keywords":"","body":"Frida TODO： 【记录】iOS的iPhone中安装Frida 【未解决】用Frida动态调试iOS版抖音app 【已解决】frida启动抖音app报错：Failed to attach need Gadget to attach on jailed iOS 【已解决】Frida中如何通过frida启动被测app程序iOS版抖音 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:01:43 "},"debug_ui/":{"url":"debug_ui/","title":"调试界面元素","keywords":"","body":"调试界面元素 TODO： 【整理】页面元素调试结果对比：Reveal、Cycript、LLDBTools、chisel 【记录】XCode+MonkeyDev动态调试抖音：从点赞关注UI界面入手找底层代码逻辑 iOS逆向的动态调试，也常会，从app的界面入手找对应的按钮等元素，此时就会涉及到：调试界面元素 常用的iOS的app的界面调试工具： Reveal Cycript （MonkeyDev的）LLDBTools chisel FLEX 其他 LookinLoader https://github.com/creantan/LookinLoader crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:20:14 "},"debug_ui/reveal.html":{"url":"debug_ui/reveal.html","title":"Reveal","keywords":"","body":"Reveal TODO： 【已解决】用Reveal查看抖音UI界面中点赞关注按钮相关的类和实现 【记录】找抖音关注按钮响应事件：pactions 【记录】通过Reveal查看页面元素找YouTube广告相关类 【记录】通过Reveal查看YouTube广告页面元素 【已解决】MonkeyDev中如何使用Reveal调试YouTube广告页面元素 【已解决】Mac中下载和安装Reveal iOS逆向中，用来调试界面元素，比较好用的工具之一就是：Reveal crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:04:11 "},"debug_ui/cycript.html":{"url":"debug_ui/cycript.html","title":"Cycript","keywords":"","body":"Cycript TODO： 【部分解决】用Cycript查看抖音UI界面元素以寻找关注按钮所属元素 【已解决】用MonkeyDev中Cycript去调试YouTube的UI页面的元素 iOS逆向的调试界面元素的工具，也有命令行的：Cycript crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:04:49 "},"debug_ui/lldbtools.html":{"url":"debug_ui/lldbtools.html","title":"LLDBTools","keywords":"","body":"LLDBTools TODO： 【已解决】用MonkeyDev的LLDBTools去打印UI界面元素 iOS逆向调试界面元素时，也可以用：MonkeyDev的LLDBTools的相关命令，输出界面元素信息。 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:05:41 "},"debug_ui/chisel.html":{"url":"debug_ui/chisel.html","title":"chisel","keywords":"","body":"chisel chisel本身是 整理Book】Xcode内置调试器：LLDB 的插件，其中有部分命令，也可以用来，调试打印界面元素。 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:07:03 "},"debug_ui/flex.html":{"url":"debug_ui/flex.html","title":"FLEX","keywords":"","body":"FLEX TODO： 【整理】iOS的iPhone越狱和改机相关知识 iOS越狱插件FLEX，可以用来辅助调试iOS的app的界面元素。 FLEX 效果 当它加载时，会向目标程序上方添加一个悬浮的工具栏，通过这个工具栏可以查看和修改视图的层级结构、动态修改类的属性、动态调用实例和方法、动态查看类和框架以及动态修改UI等。 截图 好像还可以擦好看类的定义 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:39:36 "},"debug_summary/":{"url":"debug_summary/","title":"动态调试心得","keywords":"","body":"动态调试心得 iOS逆向的动态调试，有很多心得，整理如下。 objc_msgSend iOS的ObjC的底层函数调用，都是通过objc_msgSend实现的。 iOS逆向调试期间，关于objc_msgSend也有很多心得，整理如下。 不带lldb_unnamed_symbol的无名的bl，往往是更重要的，我们所关注的objc_msgSend 折腾： 【未解决】研究抖音关注逻辑：___lldb_unnamed_symbol1588524$$AwemeCore 期间，调试到目前的心得： 如果是带___lldb_unnamed_symbol的写法，往往不是主要的，我们所关心的objc_msgSend函数 而无名的bl，往往是重要的，我们所关注的：objc_msgSend的相关调用 举例： 0x11427c2c8 : bl 0x115ce58fc 其实就是：objc_msgSend 而其他很多其他的bl： 0x11427c2b0 : bl 0x11427e920 ; ___lldb_unnamed_symbol1588573$$AwemeCore 只是个jmp_objc_retain，不是我们关注的重点。 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:42:38 "},"appendix/":{"url":"appendix/","title":"附录","keywords":"","body":"附录 下面列出相关参考资料。 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-03-17 20:39:28 "},"appendix/reference.html":{"url":"appendix/reference.html","title":"参考资料","keywords":"","body":"参考资料 iOS逆向攻防实战 - 掘金 (juejin.cn) SpringBoard tweak 双击图标启动debugserver - 干货分享 - 睿论坛 crifan.org，使用署名4.0国际(CC BY 4.0)协议发布 all right reserved，powered by Gitbook最后更新： 2022-10-23 16:40:00 "}}